## 最新语法规则  
  ***来自 ALPHA-half-0.0.3 内部测试版***  

  1. 存放 & 解析
       **脚本是存放运行脚本的文件**，加载器会读取 `config/minepyloader/scripts` 下所有后缀为 `.mpy` 的文件，如果不存在，请先 *运行一次游戏*，或者直接创建目录。

       ***语法规则注意: 该语法类似于`Python` ，将严格按行读取内容和缩进。***

  2. 头声明  
       a. 包声明
         所有头声明的格式均已 `#` 开头， 目前支持`package`关键词的解析，**`package`用于声明方法存储的目录**，和其它语言一样，其包结构由 `[字符串].[字符串]...`的格式组合而成，在解析时，**方法将会被标记在指定的包之下**。以下是几种包声明的可能形式:
     ``` Java
     #package test
     ```

     ``` Java
     #package test.file
     ```
       值得注意的是，读取时，加载器会将字符串按列表读取，因此如果输入多项，加载器只会读取第一项的关键词和第二项的内容，对于剩下的由空格分析的内容，则会忽略。  
       空格的数量没有固定要求，其使用`\\s+`的正则表达式进行分割文本。理论上，不允许出现特殊字符，可于当前版本，暂时没有检测，***遵循语法规则，请不要出现特殊字符。***

   3. 方法  
        **方法的格式可以参考 ` Java`/` C#`**，下列的命名将同`Java`的进行命名。  
        > [!CAUTION]  
        > **方法不应该有缩进，否则将引发错误**   

         基本语法
      `[访问修饰符] [修饰词...] [返回值类型] [方法名][(数据类型A 名称A, ...)]:`  
          - 1. 访问修饰符  
            - public 共有的，可以在任意地方访问  
            - private 私有的，只有同一个包内才可访问  
            - protect 保护性的<sub> 暂未实装 </sub>  
            - default 默认，若不输入，则默认为该访问等，当然，直接输入default也没有问题<sub> 暂未实装 </sub>  
         - 2. 修饰词
            - load 在模组初始化，加载完成所有代码后，运行一次
            - ingame 表示方法只可以在游戏内运行
         - 3. 返回值类型
            - 详见 [数据类型](#data-type)
         - 4. 方法名称命名规则
            - 理论并未规定方法命名规则，可是方法调用规定了名称规则，***遵循语法规则，请以大小写字母作为方法名***
         - 5. 参数
           - 参数严格按照``数据类型 名称``进行命名，每个参数之间应该使用 **逗号[,]** 隔开，逗号前后可以为空格，数据类型与名称之间空格不一定。
         - 6. 空行限制
           - 方法内的空行不算做方法结束、只有重新进行定义时，才被视作方法结束
         - 7. 实例
           - 初始化方法 `public load void load():` **注意：初始化方法在当前版本下不可以传入任何参数，否则将不会执行**

4. 语句  
   
   ***所有语句前都应该缩进***，否则会被认为是方法!

   1. 变量
      1. 数据类型[^1] <a name="data-type"></a>  

      | 关键词 | 类型 |
      |-----:|-----------|
      |     `Object` | 对象，任何数据类型都符合它|
      |     `String` | 字符串                |
      |     `void`   | 空<sub>用在方法返回值中</sub> |
      |     `null`   | 空<sub>用在变量中，暂无明确语法规定</sub>|
      |     `char`   | 字符<sub>暂未实装</sub>|
      |     `int`    | 整型                  |
      |     `float`  | 单精浮点数             |
      |     `double` | 双精浮点数             |
      |     `boolean`| 布尔值                |
      |     `World`  | 世界                  |
      |     `Player` | 玩家                  |

      [^1]: 只展示目前支持的数据类型

      2. ***变量初始化***
         1. 表面量  
         对于表面量，可以直接输入对应的值。例如

         | 对应数据类型 | 表面量书写 | 解释 |
         | ---- | ---- | ---- |
         | `String` | `"这是一段 \"文本 \" "` | **由双引号**内包含的字符集，允许使用`\`进行**转义** |
         | `int` | `123` / `-123` | 一段整数，支持正负形式[^2] |
         | `float`| `0.123` `1f` | 小数由自动检测将`double`转为`float`[^3], 或以`f`/`F`直接转化为`float`，或 ***16进制*** 数字 |
         | `double` | `0.1231413242` `2d` | 将字面小数转化为双精浮点数形式 | 
         | `boolean` | `true` / `false` | **尽量**小写，表示真/假 |
         | `null` | `null` | 就是null，表示空，不会引发程序空指针错误，除非语法规定 *非null* |
         
         [^2]: 使用Java中的`Integer.parseInt()`进行检测和转化，下`double`即`Double.parseDouble()` 
         [^3]: 所有字面小数都将先转化为double形式，再根据上下文转化为float，该机制可能在更新**面向对象**后重制

         2. 方法初始化
         由方法而来的初始化，允许在后方接上 [方法调用](#method-call)
         常见的方法初始化格式为`Method.new()`，目前支持的`.new()`调用有

            1. String  字符串

               ``` Java
               String a = String.new(<String>)
               ```

               通过字面量字符串创建字符串，等同于 `String a = "abc"`  
               目前**仅用来调试**，将在后续版本更新

            2. World 世界<sub> 从服务器中获得维度世界</sub>

               ``` Java
               World world = World.new(<String>)
               ```

               其中，World表示世界的名称

               | String | 世界 |
               | ---- | ---- |
               | `"overworld"` | 主世界 |
               | `"nether"` | 下界 |
               | `"end"` | 末地 |

               > [!WARNING]  
               > 如果没有世界运行，将会引发错误

            3. Player 玩家<sub> 暂时没有完全完成，预计于 *ALPHA-0.0.3* 测试版补全 </sub>

               > [!WARNING]  
               > 随时更新，请勿使用；内容暂未完成，请勿使用!

               ``` Java
               Player player = Player.new(<World>)
               ```

               从提供的世界中获得第一位玩家，如果不存在，则无效
         
         3. **无初始化**  
            只声明变量，不赋值。在当前版本中，暂时没有变量赋值运算，因此暂时无用。
         
      3. 实例  
         在接下来中，将会使用部分代码解释变量的声明与定义。以及一些根据详细的规则。

         ``` Java
         String a
         ```
         ^ 无初始化定义变量

         ``` Java
         String a = "123"
         ```
         ^ 字面量初始化。该代码由两个节点构成，定义部分由`数据类型 名称`组成，而赋值部分由`= 赋值`构成。

         > [!WARNING]  
         > 请勿在变量定义时尾随`;`，这是不符合标准的，同时可能导致错误

         ```
         World world = World.new()
         ```
         ^ 方法赋值，赋值部分将**获得方法的返回值作为变量的值**。
   
   2. 方法调用 <a name="method-call"> </a>  
      1. 内部方法调用  
         内部方法的包为`mpy.`，所以在调用内部方法前，可以选择加上`.mpy`或不加`.mpy`，这不会影响运行的结果。
         以下的列表包括一些常用的方法，初始化`.new()`方法将不会录入其中
         
         | 内部类 | 内部方法 | 效果 |
         | ---- | ---- | ---- |
         | `Logger` | `log(Object,Object)` | 以第一个**对象**的*字符串*形式作为***名称***，第二个作为***内容***，输出`日志`到日志 |
         | `Logger` | `warn(Object,Object)` | 以第一个**对象**的*字符串*形式作为***名称***，第二个作为***内容***，输出`警告`到日志 |
         | `Logger` | `err/error(Object,Object)` | 以第一个**对象**的*字符串*形式作为***名称***，第二个作为***内容***，输出`错误`到日志 |
         | `Player` | `kill(Player)` | 尝试杀死一个**玩家** |

      2. 包方法调用  
         方法使用`包.名称`的结构存储，当你想调用方法，请遵循该结构进行调用。
         例如:
         ``` Java
         #package test

         public void init(String str):
            Logger.log("测试脚本", str)
         ```


         ``` Java
         #package main

         public load void main():
            test.init("脚本已初始化")
         ```
         输出结果: `(测试脚本)脚本已初始化`

         ---

         对于多个同一名称的方法，采取类似**覆写**的机制。

         ``` Java
         #package test

         public void init(String str):
            Logger.log("测试脚本", str)
            // 覆写测试
         public void init(String str, String s):
            Logger.log(str, s)
         ```


         ``` Java
         #package main

         public load void main():
            test.init("脚本已初始化")
            test.init("主脚本", "脚本已初始化")
         ```

         输出结果 
         - `(测试脚本)脚本已初始化`  
         - `(主脚本)脚本已初始化`

5. 注释  
   注释的检测非常简单，目前只有一种类型，即在空行隔着任意缩进，输入`//`  
   例如:
   ``` Java
   // 这是一行注释
   public load void main():
      // 他可以在任意地方
        // 当然也不论缩进
   ```

6. 基本实例  
   1. 杀死主世界一名玩家
   ``` Java
   #package main

   // 定义方法
   public ingame void killplayer():
   // 获得世界
      World world = World.new("overworld")
   // 获得玩家
      Player player = Player.new(world)
   // 杀死玩家
      Player.kill(player)
   ```

7. 指令调用  
   在指令中，也可以调用方法

   语法: `/methods <方法>`  
   
   例如，调用 *基本实例1* 中的方法:  
   `/methods main.killplayer`







      